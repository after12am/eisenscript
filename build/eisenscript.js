var es=function(){var R,S,T,U,V,W,X,Y,Z,$,aa,ba,ca,da,O,P,Q,ea,fa,ga,ha,ia,ja,ka,la,L,ma,na;function z(b){0==arguments.length&&(b=(new Date).getTime());this._mt=Array(624);this.setSeed(b)}var u={};if("undefined"==typeof A)var A={};A.brehaut||(A.brehaut={});(function(){function b(a,b){for(var a=a.toString(),c=[],d=0,h=Math.max(b-a.length,0);d<h;d++)c.push("0");c.push(a);return c.join("")}function a(a){return a.slice(0,1).toUpperCase()+a.slice(1)}function c(a){return a.replace(/^\s+|\s+$/g,"")}function d(a){return function(){var b=
this.clone();a.apply(b,arguments);return b}}function h(b,c){function d(a){return function(){return a.apply(this[j](),arguments)}}function h(){}function e(){return new h}var f=m(o),i=[],j="to"+a(b),k;for(k in c)if(c.hasOwnProperty(k)){f[k]=c[k];var l=f[k];if(k.slice(0,1)!="_")if(!(k in o)&&"function"==typeof l)o[k]=d(l);else if("function"!=typeof l){i.push(k);var l="get"+a(k),n="set"+a(k);o[l]=d(f[l]=function(a){return function(){return this[a]}}(k));o[n]=d(f[n]=function(a){return function(b){var c=
this.clone();c[a]=b;return c}}(k))}}h.prototype=f;q[b]=e;f.clone=function(){for(var a=e(),b=0,c=i.length;b<c;b++){var d=i[b];a[d]=this[d]}return a};o[j]=function(){return e()};r.push(f);return f}function i(a){return o.fromObject(a)}var e={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",
chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",
deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",
lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",
mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",
pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",
white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:'#9ACD32"'},j="(?:\\+|-)?\\d+",f="(?:\\+|-)?\\d*\\.\\d+",l="(?:"+j+")|(?:"+f+")",j="("+j+")",f="("+f+")",l="("+l+")",f=l+"%",k=RegExp(["^hsl(a?)\\(",l,",",f,",",f,"(,(",l,"))?\\)$"].join("\\s*?")),n=RegExp(["^rgb(a?)\\(",j,",",j,",",j,"(,(",l,"))?\\)$"].join("\\s*?")),p=RegExp(["^rgb(a?)\\(",f,",",f,",",f,"(,(",l,"))?\\)$"].join("\\s*?")),o,r=[],q={};if(!this.object)this.object=function(a){function b(){}b.prototype=a;return new b};
var m=this.object;o={fromObject:function(a){if(!a)return m(o);for(var b=0,c=r.length;b<c;b++){var d=r[b].fromObject(a);if(d)return d}return m(o)},toString:function(){return this.toCSS()}};var t=null;h("RGB",{red:0,green:0,blue:0,alpha:0,getLuminance:function(){return this.red*0.2126+this.green*0.7152+this.blue*0.0722},blend:function(a,b){var a=a.toRGB(),b=Math.min(Math.max(b,0),1),c=this.clone();c.red=c.red*(1-b)+a.red*b;c.green=c.green*(1-b)+a.green*b;c.blue=c.blue*(1-b)+a.blue*b;c.alpha=c.alpha*
(1-b)+a.alpha*b;return c},fromObject:function(a){if(a instanceof Array)return this._fromRGBArray(a);if("string"==typeof a)return this._fromCSS(c(a));if(a.hasOwnProperty("red")&&a.hasOwnProperty("green")&&a.hasOwnProperty("blue"))return this._fromRGB(a)},_stringParsers:[function(a){function b(c,d){var h=a.match(c);if(!h||!!h[1]+!!h[5]===1)return null;var e=q.RGB();e.red=Math.min(1,Math.max(0,h[2]/d));e.green=Math.min(1,Math.max(0,h[3]/d));e.blue=Math.min(1,Math.max(0,h[4]/d));e.alpha=h[5]?Math.min(Math.max(parseFloat(h[6]),
0),1):1;return e}var a=c(a),d=b(n,255);return d?d:b(p,100)},function(a){var b=a.toLowerCase();b in e&&(a=e[b]);if(a.match(/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/)){var a=a.replace(/^#/,""),b=a.length/3,c=Math.pow(16,b)-1,d=q.RGB();d.red=parseInt(a.slice(0,b),16)/c;d.green=parseInt(a.slice(b*1,b*2),16)/c;d.blue=parseInt(a.slice(b*2),16)/c;d.alpha=1;return d}},function(a){if(a.toLowerCase()==="transparent")return t}],_fromCSS:function(a){for(var b=null,c=0,d=this._stringParsers.length;c<d;c++)if(b=this._stringParsers[c](a))return b},
_fromRGB:function(a){var b=q.RGB();b.red=a.red;b.green=a.green;b.blue=a.blue;b.alpha=a.hasOwnProperty("alpha")?a.alpha:1;return b},_fromRGBArray:function(a){var b=q.RGB();b.red=Math.max(0,Math.min(1,a[0]/255));b.green=Math.max(0,Math.min(1,a[1]/255));b.blue=Math.max(0,Math.min(1,a[2]/255));b.alpha=a[3]!==void 0?Math.max(0,Math.min(1,a[3])):1;return b},toCSSHex:function(a){var a=a||2,c=Math.pow(16,a)-1;return["#",b(Math.round(this.red*c).toString(16).toUpperCase(),a),b(Math.round(this.green*c).toString(16).toUpperCase(),
a),b(Math.round(this.blue*c).toString(16).toUpperCase(),a)].join("")},toCSS:function(a){return this.alpha===1?this.toCSSHex(a):["rgba(",Math.max(0,Math.min(255,Math.round(this.red*255))),",",Math.max(0,Math.min(255,Math.round(this.green*255))),",",Math.max(0,Math.min(255,Math.round(this.blue*255))),",",Math.max(0,Math.min(1,this.alpha)),")"].join("")},toHSV:function(){var a=q.HSV(),b,c;b=Math.min(this.red,this.green,this.blue);c=Math.max(this.red,this.green,this.blue);a.value=c;b=c-b;if(b==0)a.hue=
a.saturation=0;else{a.saturation=b/c;a.hue=this.red==c?(this.green-this.blue)/b:this.green==c?2+(this.blue-this.red)/b:4+(this.red-this.green)/b;a.hue=(a.hue*60+360)%360}a.alpha=this.alpha;return a},toHSL:function(){return this.toHSV().toHSL()},toRGB:function(){return this.clone()}});t=o.fromObject({red:0,blue:0,green:0,alpha:0});h("HSV",{hue:0,saturation:0,value:1,alpha:1,shiftHue:d(function(a){a=(this.hue+a)%360;a<0&&(a=(360+a)%360);this.hue=a}),devalueByAmount:d(function(a){this.value=Math.min(1,
Math.max(this.value-a,0))}),devalueByRatio:d(function(a){this.value=Math.min(1,Math.max(this.value*(1-a),0))}),valueByAmount:d(function(a){this.value=Math.min(1,Math.max(this.value+a,0))}),valueByRatio:d(function(a){this.value=Math.min(1,Math.max(this.value*(1+a),0))}),desaturateByAmount:d(function(a){this.saturation=Math.min(1,Math.max(this.saturation-a,0))}),desaturateByRatio:d(function(a){this.saturation=Math.min(1,Math.max(this.saturation*(1-a),0))}),saturateByAmount:d(function(a){this.saturation=
Math.min(1,Math.max(this.saturation+a,0))}),saturateByRatio:d(function(a){this.saturation=Math.min(1,Math.max(this.saturation*(1+a),0))}),schemeFromDegrees:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var h=this.clone();h.hue=(this.hue+a[c])%360;b.push(h)}return b},complementaryScheme:function(){return this.schemeFromDegrees([0,180])},splitComplementaryScheme:function(){return this.schemeFromDegrees([0,150,320])},splitComplementaryCWScheme:function(){return this.schemeFromDegrees([0,150,300])},
splitComplementaryCCWScheme:function(){return this.schemeFromDegrees([0,60,210])},triadicScheme:function(){return this.schemeFromDegrees([0,120,240])},clashScheme:function(){return this.schemeFromDegrees([0,90,270])},tetradicScheme:function(){return this.schemeFromDegrees([0,90,180,270])},fourToneCWScheme:function(){return this.schemeFromDegrees([0,60,180,240])},fourToneCCWScheme:function(){return this.schemeFromDegrees([0,120,180,300])},fiveToneAScheme:function(){return this.schemeFromDegrees([0,
115,155,205,245])},fiveToneBScheme:function(){return this.schemeFromDegrees([0,40,90,130,245])},fiveToneCScheme:function(){return this.schemeFromDegrees([0,50,90,205,320])},fiveToneDScheme:function(){return this.schemeFromDegrees([0,40,155,270,310])},fiveToneEScheme:function(){return this.schemeFromDegrees([0,115,230,270,320])},sixToneCWScheme:function(){return this.schemeFromDegrees([0,30,120,150,240,270])},sixToneCCWScheme:function(){return this.schemeFromDegrees([0,90,120,210,240,330])},neutralScheme:function(){return this.schemeFromDegrees([0,
15,30,45,60,75])},analogousScheme:function(){return this.schemeFromDegrees([0,30,60,90,120,150])},fromObject:function(a){if(a.hasOwnProperty("hue")&&a.hasOwnProperty("saturation")&&a.hasOwnProperty("value")){var b=q.HSV();b.hue=a.hue;b.saturation=a.saturation;b.value=a.value;b.alpha=a.hasOwnProperty("alpha")?a.alpha:1;return b}return null},_normalise:function(){this.hue=this.hue%360;this.saturation=Math.min(Math.max(0,this.saturation),1);this.value=Math.min(Math.max(0,this.value));this.alpha=Math.min(1,
Math.max(0,this.alpha))},toRGB:function(){this._normalise();var a=q.RGB(),b,c,d,h;if(this.saturation===0){a.red=this.value;a.green=this.value;a.blue=this.value;a.alpha=this.alpha;return a}d=this.hue/60;b=Math.floor(d);c=d-b;d=this.value*(1-this.saturation);h=this.value*(1-this.saturation*c);c=this.value*(1-this.saturation*(1-c));switch(b){case 0:a.red=this.value;a.green=c;a.blue=d;break;case 1:a.red=h;a.green=this.value;a.blue=d;break;case 2:a.red=d;a.green=this.value;a.blue=c;break;case 3:a.red=
d;a.green=h;a.blue=this.value;break;case 4:a.red=c;a.green=d;a.blue=this.value;break;default:a.red=this.value;a.green=d;a.blue=h}a.alpha=this.alpha;return a},toHSL:function(){this._normalise();var a=q.HSL();a.hue=this.hue;var b=(2-this.saturation)*this.value,c=this.saturation*this.value;b&&2-b&&(c=c/(b<=1?b:2-b));a.saturation=c;a.lightness=b/2;a.alpha=this.alpha;return a},toHSV:function(){return this.clone()}});h("HSL",{hue:0,saturation:0,lightness:0,alpha:1,darkenByAmount:d(function(a){this.lightness=
Math.min(1,Math.max(this.lightness-a,0))}),darkenByRatio:d(function(a){this.lightness=Math.min(1,Math.max(this.lightness*(1-a),0))}),lightenByAmount:d(function(a){this.lightness=Math.min(1,Math.max(this.lightness+a,0))}),lightenByRatio:d(function(a){this.lightness=Math.min(1,Math.max(this.lightness*(1+a),0))}),fromObject:function(a){if("string"==typeof a)return this._fromCSS(a);if(a.hasOwnProperty("hue")&&a.hasOwnProperty("saturation")&&a.hasOwnProperty("lightness"))return this._fromHSL(a)},_fromCSS:function(a){a=
c(a).match(k);if(!a||!!a[1]+!!a[5]===1)return null;var b=q.HSL();b.hue=(a[2]%360+360)%360;b.saturation=Math.max(0,Math.min(parseInt(a[3],10)/100,1));b.lightness=Math.max(0,Math.min(parseInt(a[4],10)/100,1));b.alpha=a[5]?Math.max(0,Math.min(1,parseFloat(a[6]))):1;return b},_fromHSL:function(a){var b=q.HSL();b.hue=a.hue;b.saturation=a.saturation;b.lightness=a.lightness;b.alpha=a.hasOwnProperty("alpha")?a.alpha:1;return b},_normalise:function(){this.hue=(this.hue%360+360)%360;this.saturation=Math.min(Math.max(0,
this.saturation),1);this.lightness=Math.min(Math.max(0,this.lightness));this.alpha=Math.min(1,Math.max(0,this.alpha))},toHSL:function(){return this.clone()},toHSV:function(){this._normalise();var a=q.HSV();a.hue=this.hue;var b=2*this.lightness,c=this.saturation*(b<=1?b:2-b);a.value=(b+c)/2;a.saturation=2*c/(b+c)||0;a.alpha=this.alpha;return a},toRGB:function(){return this.toHSV().toRGB()}});i.isValid=function(a){var b,a=i(a),c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c>0};A.brehaut.Color=i}).call(A.brehaut);
var M=A.brehaut.Color;u.compile=function(b){var a;try{a=C.parse(b)}catch(c){return{error:c.message}}b=(new x(a)).generate();return{ast:a,objects:b}};var x=function(b){this.ast=b;this.objects=[];this.define=[];this.rules={};this.computed=[];this.maxdepth=100;this.depth=0;this.maxobjects=1E3;this.objectnum=0;this.minsize=0.2;this.maxsize=1;this.seed="initial";this.stack=[];this.currMatrix=(new pa).identity();this.currHex=M("#ff0000");this.currHsv=N.extend(M({hue:0,saturation:1,value:1}),{computed:false});
this.currBlend={color:null,strength:0,computed:false};this.currAlpha=1;this.mt=new z};x.prototype.terminated=function(){return this.objectnum>this.maxobjects||this.depth>=this.maxdepth?true:false};x.prototype.pushState=function(){this.stack.push({matrix:this.currMatrix.clone(),hex:this.currHex.clone(),hsv:this.currHsv.clone(),blend:N.extend({},this.currBlend),alpha:this.currAlpha})};x.prototype.popState=function(){if(this.stack.length!==0){var b=this.stack.pop();this.currMatrix=b.matrix;this.currHex=
b.hex;this.currHsv=b.hsv;this.currBlend=b.blend;this.currAlpha=b.alpha}};x.prototype.generate=function(){var b=this;this.ast.forEach(function(a){switch(a.type){case ka:b.rewriteRule(a)}});this.ast.forEach(function(a){switch(a.type){case la:b.define.push(a);break;case L:b.define.push(a);break;case ma:a.computed&&b.computed.push(a)}});this.define.forEach(function(a){switch(a.type){case L:switch(a.key){case Q:b.maxdepth=a.value;break;case ea:b.maxobjects=a.value;break;case fa:b.minsize=a.value;break;
case ga:b.maxsize=a.value;break;case ha:b.seed=a.value}}});this.mt.setSeed(this.seed==="initial"?0+Math.floor(Math.random()*65536):this.seed);this.define.forEach(function(a){switch(a.type){case L:a.key===ia&&b.generateBackground(a)}});this.parseStatements(this.computed);return this.objects};x.prototype.rewriteRule=function(b){b.params.forEach(function(a){if(a.type===na)switch(a.key){case ja:b.weight=a.value;break;case Q:b.maxdepth=a.value;b.alternate=a.alternate}});this.rules[b.id]||(this.rules[b.id]=
[]);this.rules[b.id].push(b)};x.prototype.parseStatements=function(b){for(var a=0,c=b.length;a<c;){if(this.terminated())break;this.parseStatement(b[a],0);a++}};x.prototype.parseStatement=function(b,a){var c=b.exprs[a];if(c){this.depth++;this.pushState();for(var d=0;d<c.left;d++){if(this.terminated())break;this.parseTransformStatement(c.right);this.parseStatement(b,a+1)}this.popState();this.depth--}else if(N.values(qa).indexOf(b.id)===-1)(c=this.sampling(b.id))&&this.parseStatements(c.body);else this.generatePrimitive(b)};
x.prototype.parseTransformStatement=function(b){for(var a=0,c=b.properties.length;a<c;){this.parseTransform(b.properties[a]);a++}};x.prototype.parseTransform=function(b){var a=b.value;switch(b.key){case R:this.currMatrix.translate({x:a,y:0,z:0});break;case S:this.currMatrix.translate({x:0,y:a,z:0});break;case T:this.currMatrix.translate({x:0,y:0,z:a});break;case U:this.currMatrix.rotateX(K(a));break;case V:this.currMatrix.rotateY(K(a));break;case W:this.currMatrix.rotateZ(K(a));break;case X:this.currMatrix.scale({x:a[0],
y:a[1],z:a[2]});break;case Y:this.currMatrix.set(a[0],a[1],a[2],0,a[3],a[4],a[5],0,a[6],a[7],a[8],0);break;case Z:this.currHex=M(a);break;case $:this.currHsv.computed=true;this.currHsv.hue=this.currHsv.hue+a%360;break;case aa:this.currHsv.computed=true;this.currHsv.saturation=this.currHsv.saturation*a<0?0:this.currHsv.saturation*a>1?1:this.currHsv.saturation*a;break;case ba:this.currHsv.computed=true;this.currHsv.value=this.currHsv.value*a<0?0:this.currHsv.value*a>1?1:this.currHsv.value*a;break;case ca:this.currBlend.computed=
true;this.currBlend.color=b.color;this.currBlend.strength=this.currBlend.strength+(b.strength<0?0:b.strength>1?1:b.strength);break;case da:this.currAlpha=this.currAlpha*a}};x.prototype.generatePrimitive=function(b){this.objectnum++;if(!this.terminated()){if(this.currBlend.computed){this.currHex=this.currHex.toHSV();this.currHex.hue=this.currHex.hue+(M(this.currBlend.color).toHSV().hue-this.currHex.hue)*this.currBlend.strength/6;this.currHex.hue=this.currHex.hue%360}this.objects.push({type:O,name:b.id,
matrix:this.currMatrix.clone(),color:this.currHsv.computed?this.currHex.blend(this.currHsv,1).toCSS():this.currHex.toCSS(),opacity:this.currAlpha})}};x.prototype.generateBackground=function(b){this.objects.push({type:P,color:b.value})};x.prototype.sampling=function(b,a){if(this.rules[b]){var c=0;this.rules[b].forEach(function(a){a.weight=a.weight||1;c=c+a.weight});for(var d=this.mt.next()*c,h,i=0;i<this.rules[b].length;i++){var e=this.rules[b][i];if(e.weight-d<0)d=d-e.weight;else{h=e;break}}if(h){h.depth=
(h.depth||0)+1;if(h.maxdepth&&h.maxdepth<h.depth){if(h.alternate)return this.sampling(h.alternate)}else return h}else{a=a||0;if(a<3)return this.sampling(b,++a)}}else console.warn("eisenscript: undefined rule")};var C=function(){function b(){this.yy={}}var a={trace:function(){},yy:{},symbols_:{error:2,eisenscript:3,lines:4,EOF:5,line:6,maxdepth:7,maxobjects:8,minsize:9,maxsize:10,seed:11,background:12,color:13,colorpool:14,define:15,rule:16,statement:17,SET:18,MAXDEPTH:19,num:20,MAXOBJECTS:21,MINSIZE:22,
MAXSIZE:23,SEED:24,INITIAL:25,BACKGROUND:26,COLOR3:27,COLOR6:28,STRING:29,RANDOM:30,COLOR:31,HUE:32,ALPHA:33,BLEND:34,SATURATION:35,BRIGHTNESS:36,COLORPOOL:37,RANDOMHUE:38,RANDOMRGB:39,GREYSCALE:40,COLORLIST:41,IMAGE:42,DEFINE:43,RULE:44,id:45,modifiers:46,"{":47,statements:48,"}":49,modifier:50,WEIGHT:51,">":52,rulename:53,expressions:54,expression:55,object:56,n:57,"*":58,properties:59,property:60,geo:61,XSHIFT:62,YSHIFT:63,ZSHIFT:64,ROTATEX:65,ROTATEY:66,ROTATEZ:67,SIZE:68,MATRIX:69,"+":70,"-":71,
"(":72,e:73,")":74,NUMBER:75,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",18:"SET",19:"MAXDEPTH",21:"MAXOBJECTS",22:"MINSIZE",23:"MAXSIZE",24:"SEED",25:"INITIAL",26:"BACKGROUND",27:"COLOR3",28:"COLOR6",29:"STRING",30:"RANDOM",31:"COLOR",32:"HUE",33:"ALPHA",34:"BLEND",35:"SATURATION",36:"BRIGHTNESS",37:"COLORPOOL",38:"RANDOMHUE",39:"RANDOMRGB",40:"GREYSCALE",41:"COLORLIST",42:"IMAGE",43:"DEFINE",44:"RULE",47:"{",49:"}",51:"WEIGHT",52:">",58:"*",62:"XSHIFT",63:"YSHIFT",64:"ZSHIFT",65:"ROTATEX",66:"ROTATEY",
67:"ROTATEZ",68:"SIZE",69:"MATRIX",70:"+",71:"-",72:"(",73:"e",74:")",75:"NUMBER"},productions_:[0,[3,2],[4,2],[4,0],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[7,3],[8,3],[9,3],[10,3],[11,3],[11,3],[12,3],[12,3],[12,3],[12,3],[13,3],[13,2],[13,2],[13,2],[13,2],[13,2],[13,2],[13,3],[13,3],[13,3],[13,3],[13,2],[13,2],[14,3],[14,3],[14,3],[14,3],[14,3],[15,3],[16,6],[46,2],[46,0],[50,2],[50,2],[50,4],[48,2],[48,0],[17,2],[54,2],[54,0],[55,1],[55,3],[56,3],[59,2],[59,0],[60,1],
[60,1],[61,2],[61,2],[61,2],[61,2],[61,2],[61,2],[61,2],[61,4],[61,10],[20,1],[20,2],[20,2],[20,3],[57,1],[45,1],[53,1]],performAction:function(a,b,c,e,j,f){b=f.length-1;switch(j){case 1:return this.$=f[b-1];case 2:this.$=f[b-1];this.$.push(f[b]);break;case 3:this.$=[];break;case 4:this.$=f[b];break;case 5:this.$=f[b];break;case 6:this.$=f[b];break;case 7:this.$=f[b];break;case 8:this.$=f[b];break;case 9:this.$=f[b];break;case 10:this.$=f[b];break;case 11:this.$=f[b];break;case 12:this.$=f[b];break;
case 13:this.$=f[b];break;case 14:this.$=f[b];f[b].computed=true;break;case 15:this.$={type:"set",key:"maxdepth",value:f[b]};break;case 16:this.$={type:"set",key:"maxobjects",value:f[b]};break;case 17:this.$={type:"set",key:"minsize",value:f[b]};break;case 18:this.$={type:"set",key:"maxsize",value:f[b]};break;case 19:this.$={type:"set",key:"seed",value:f[b]};break;case 20:this.$={type:"set",key:"seed",value:f[b]};break;case 21:this.$={type:"set",key:"background",value:f[b].toLowerCase()};break;case 22:this.$=
{type:"set",key:"background",value:f[b].toLowerCase()};break;case 23:this.$={type:"set",key:"background",value:f[b].toLowerCase()};break;case 24:this.$={type:"set",key:"background",value:f[b].toLowerCase()};break;case 25:this.$={type:"set",key:"color",value:f[b].toLowerCase()};break;case 26:this.$={type:"property",key:"hue",value:f[b]};break;case 27:this.$={type:"property",key:"alpha",value:f[b]};break;case 28:this.$={type:"property",key:"color",value:f[b].toLowerCase()};break;case 29:this.$={type:"property",
key:"color",value:f[b].toLowerCase()};break;case 30:this.$={type:"property",key:"color",value:f[b].toLowerCase()};break;case 31:this.$={type:"property",key:"color",value:f[b].toLowerCase()};break;case 32:this.$={type:"property",key:"blend",color:f[b-1].toLowerCase(),strength:f[b]};break;case 33:this.$={type:"property",key:"blend",color:f[b-1].toLowerCase(),strength:f[b]};break;case 34:this.$={type:"property",key:"blend",color:f[b-1].toLowerCase(),strength:f[b]};break;case 35:this.$={type:"property",
key:"blend",color:f[b-1].toLowerCase(),strength:f[b]};break;case 36:this.$={type:"property",key:"saturation",value:f[b]};break;case 37:this.$={type:"property",key:"brightness",value:f[b]};break;case 38:this.$={type:"set",key:"colorpool",value:f[b].toLowerCase()};break;case 39:this.$={type:"set",key:"colorpool",value:f[b].toLowerCase()};break;case 40:this.$={type:"set",key:"colorpool",value:f[b].toLowerCase()};break;case 41:this.$={type:"set",key:"colorpool",value:f[b].toLowerCase()};break;case 42:this.$=
{type:"set",key:"colorpool",value:f[b].toLowerCase()};break;case 43:this.$={type:"define",varname:f[b-1],value:f[b]};break;case 44:this.$={type:"rule",id:f[b-4],params:f[b-3],body:f[b-1]};break;case 45:this.$=f[b-1];this.$.push(f[b]);break;case 46:this.$=[];break;case 47:this.$={type:"modifier",key:"weight",value:f[b]};break;case 48:this.$={type:"modifier",key:"maxdepth",value:f[b]};break;case 49:this.$={type:"modifier",key:"maxdepth",value:f[b-2],alternate:f[b]};break;case 50:this.$=f[b-1];this.$.push(f[b]);
break;case 51:this.$=[];break;case 52:this.$={type:"statement",id:f[b],exprs:f[b-1]};break;case 53:this.$=f[b-1];this.$.push(f[b]);break;case 54:this.$=[];break;case 55:this.$={type:"expr",left:1,right:f[b]};break;case 56:this.$={type:"expr",left:f[b-2],right:f[b]};break;case 57:this.$={type:"object",properties:f[b-1]};break;case 58:"property";this.$=f[b-1];this.$.push(f[b]);break;case 59:this.$=[];break;case 62:this.$={type:"property",key:"xshift",value:f[b]};break;case 63:this.$={type:"property",
key:"yshift",value:f[b]};break;case 64:this.$={type:"property",key:"zshift",value:f[b]};break;case 65:this.$={type:"property",key:"rotatex",value:f[b]};break;case 66:this.$={type:"property",key:"rotatey",value:f[b]};break;case 67:this.$={type:"property",key:"rotatez",value:f[b]};break;case 68:this.$={type:"property",key:"size",value:[f[b],f[b],f[b]]};break;case 69:this.$={type:"property",key:"size",value:[f[b-2],f[b-1],f[b]]};break;case 70:this.$={type:"property",key:"matrix",value:[f[b-8],f[b-7],
f[b-6],f[b-5],f[b-4],f[b-3],f[b-2],f[b-1],f[b]]};break;case 72:this.$=f[b];break;case 73:this.$=-f[b];break;case 74:this.$=f[b-1];break;case 75:this.$=parseFloat(a);break;case 76:this.$=a;break;case 77:this.$=f[b]}},table:[{3:1,4:2,5:[2,3],18:[2,3],29:[2,3],31:[2,3],32:[2,3],33:[2,3],34:[2,3],35:[2,3],36:[2,3],43:[2,3],44:[2,3],47:[2,3],75:[2,3]},{1:[3]},{5:[1,3],6:4,7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:12,15:13,16:14,17:15,18:[1,16],29:[2,54],31:[1,19],32:[1,17],33:[1,18],34:[1,20],35:[1,21],36:[1,
22],43:[1,23],44:[1,24],47:[2,54],54:25,75:[2,54]},{1:[2,1]},{5:[2,2],18:[2,2],29:[2,2],31:[2,2],32:[2,2],33:[2,2],34:[2,2],35:[2,2],36:[2,2],43:[2,2],44:[2,2],47:[2,2],75:[2,2]},{5:[2,4],18:[2,4],29:[2,4],31:[2,4],32:[2,4],33:[2,4],34:[2,4],35:[2,4],36:[2,4],43:[2,4],44:[2,4],47:[2,4],75:[2,4]},{5:[2,5],18:[2,5],29:[2,5],31:[2,5],32:[2,5],33:[2,5],34:[2,5],35:[2,5],36:[2,5],43:[2,5],44:[2,5],47:[2,5],75:[2,5]},{5:[2,6],18:[2,6],29:[2,6],31:[2,6],32:[2,6],33:[2,6],34:[2,6],35:[2,6],36:[2,6],43:[2,
6],44:[2,6],47:[2,6],75:[2,6]},{5:[2,7],18:[2,7],29:[2,7],31:[2,7],32:[2,7],33:[2,7],34:[2,7],35:[2,7],36:[2,7],43:[2,7],44:[2,7],47:[2,7],75:[2,7]},{5:[2,8],18:[2,8],29:[2,8],31:[2,8],32:[2,8],33:[2,8],34:[2,8],35:[2,8],36:[2,8],43:[2,8],44:[2,8],47:[2,8],75:[2,8]},{5:[2,9],18:[2,9],29:[2,9],31:[2,9],32:[2,9],33:[2,9],34:[2,9],35:[2,9],36:[2,9],43:[2,9],44:[2,9],47:[2,9],75:[2,9]},{5:[2,10],18:[2,10],29:[2,10],31:[2,10],32:[2,10],33:[2,10],34:[2,10],35:[2,10],36:[2,10],43:[2,10],44:[2,10],47:[2,
10],75:[2,10]},{5:[2,11],18:[2,11],29:[2,11],31:[2,11],32:[2,11],33:[2,11],34:[2,11],35:[2,11],36:[2,11],43:[2,11],44:[2,11],47:[2,11],75:[2,11]},{5:[2,12],18:[2,12],29:[2,12],31:[2,12],32:[2,12],33:[2,12],34:[2,12],35:[2,12],36:[2,12],43:[2,12],44:[2,12],47:[2,12],75:[2,12]},{5:[2,13],18:[2,13],29:[2,13],31:[2,13],32:[2,13],33:[2,13],34:[2,13],35:[2,13],36:[2,13],43:[2,13],44:[2,13],47:[2,13],75:[2,13]},{5:[2,14],18:[2,14],29:[2,14],31:[2,14],32:[2,14],33:[2,14],34:[2,14],35:[2,14],36:[2,14],43:[2,
14],44:[2,14],47:[2,14],75:[2,14]},{19:[1,26],21:[1,27],22:[1,28],23:[1,29],24:[1,30],26:[1,31],31:[1,32],37:[1,33]},{20:34,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:40,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{27:[1,41],28:[1,42],29:[1,44],30:[1,43]},{27:[1,45],28:[1,46],29:[1,48],30:[1,47]},{20:49,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:50,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{29:[1,51]},{29:[1,53],45:52},{29:[1,53],45:54,47:[1,58],55:55,56:56,57:57,75:[1,39]},
{20:59,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:60,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:61,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:62,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:63,25:[1,64],57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{27:[1,65],28:[1,66],29:[1,67],30:[1,68]},{30:[1,69]},{38:[1,70],39:[1,71],40:[1,72],41:[1,73],42:[1,74]},{5:[2,26],18:[2,26],29:[2,26],31:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],43:[2,26],44:[2,26],47:[2,
26],49:[2,26],62:[2,26],63:[2,26],64:[2,26],65:[2,26],66:[2,26],67:[2,26],68:[2,26],69:[2,26],75:[2,26]},{5:[2,71],18:[2,71],19:[2,71],29:[2,71],31:[2,71],32:[2,71],33:[2,71],34:[2,71],35:[2,71],36:[2,71],43:[2,71],44:[2,71],47:[2,71],49:[2,71],51:[2,71],52:[2,71],62:[2,71],63:[2,71],64:[2,71],65:[2,71],66:[2,71],67:[2,71],68:[2,71],69:[2,71],70:[2,71],71:[2,71],72:[2,71],75:[2,71]},{57:75,75:[1,39]},{57:76,75:[1,39]},{73:[1,77]},{5:[2,75],18:[2,75],19:[2,75],29:[2,75],31:[2,75],32:[2,75],33:[2,75],
34:[2,75],35:[2,75],36:[2,75],43:[2,75],44:[2,75],47:[2,75],49:[2,75],51:[2,75],52:[2,75],58:[2,75],62:[2,75],63:[2,75],64:[2,75],65:[2,75],66:[2,75],67:[2,75],68:[2,75],69:[2,75],70:[2,75],71:[2,75],72:[2,75],75:[2,75]},{5:[2,27],18:[2,27],29:[2,27],31:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],43:[2,27],44:[2,27],47:[2,27],49:[2,27],62:[2,27],63:[2,27],64:[2,27],65:[2,27],66:[2,27],67:[2,27],68:[2,27],69:[2,27],75:[2,27]},{5:[2,28],18:[2,28],29:[2,28],31:[2,28],32:[2,28],33:[2,28],
34:[2,28],35:[2,28],36:[2,28],43:[2,28],44:[2,28],47:[2,28],49:[2,28],62:[2,28],63:[2,28],64:[2,28],65:[2,28],66:[2,28],67:[2,28],68:[2,28],69:[2,28],75:[2,28]},{5:[2,29],18:[2,29],29:[2,29],31:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],43:[2,29],44:[2,29],47:[2,29],49:[2,29],62:[2,29],63:[2,29],64:[2,29],65:[2,29],66:[2,29],67:[2,29],68:[2,29],69:[2,29],75:[2,29]},{5:[2,30],18:[2,30],29:[2,30],31:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],43:[2,30],44:[2,30],47:[2,30],
49:[2,30],62:[2,30],63:[2,30],64:[2,30],65:[2,30],66:[2,30],67:[2,30],68:[2,30],69:[2,30],75:[2,30]},{5:[2,31],18:[2,31],29:[2,31],31:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],43:[2,31],44:[2,31],47:[2,31],49:[2,31],62:[2,31],63:[2,31],64:[2,31],65:[2,31],66:[2,31],67:[2,31],68:[2,31],69:[2,31],75:[2,31]},{20:78,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:79,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:80,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:81,57:35,70:[1,
36],71:[1,37],72:[1,38],75:[1,39]},{5:[2,36],18:[2,36],29:[2,36],31:[2,36],32:[2,36],33:[2,36],34:[2,36],35:[2,36],36:[2,36],43:[2,36],44:[2,36],47:[2,36],49:[2,36],62:[2,36],63:[2,36],64:[2,36],65:[2,36],66:[2,36],67:[2,36],68:[2,36],69:[2,36],75:[2,36]},{5:[2,37],18:[2,37],29:[2,37],31:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],43:[2,37],44:[2,37],47:[2,37],49:[2,37],62:[2,37],63:[2,37],64:[2,37],65:[2,37],66:[2,37],67:[2,37],68:[2,37],69:[2,37],75:[2,37]},{20:82,57:35,70:[1,36],71:[1,
37],72:[1,38],75:[1,39]},{19:[2,46],46:83,47:[2,46],51:[2,46]},{5:[2,76],18:[2,76],19:[2,76],29:[2,76],31:[2,76],32:[2,76],33:[2,76],34:[2,76],35:[2,76],36:[2,76],43:[2,76],44:[2,76],47:[2,76],49:[2,76],51:[2,76],75:[2,76]},{5:[2,52],18:[2,52],29:[2,52],31:[2,52],32:[2,52],33:[2,52],34:[2,52],35:[2,52],36:[2,52],43:[2,52],44:[2,52],47:[2,52],49:[2,52],75:[2,52]},{29:[2,53],47:[2,53],75:[2,53]},{29:[2,55],47:[2,55],75:[2,55]},{58:[1,84]},{18:[2,59],31:[2,59],32:[2,59],33:[2,59],34:[2,59],35:[2,59],
36:[2,59],49:[2,59],59:85,62:[2,59],63:[2,59],64:[2,59],65:[2,59],66:[2,59],67:[2,59],68:[2,59],69:[2,59]},{5:[2,15],18:[2,15],29:[2,15],31:[2,15],32:[2,15],33:[2,15],34:[2,15],35:[2,15],36:[2,15],43:[2,15],44:[2,15],47:[2,15],75:[2,15]},{5:[2,16],18:[2,16],29:[2,16],31:[2,16],32:[2,16],33:[2,16],34:[2,16],35:[2,16],36:[2,16],43:[2,16],44:[2,16],47:[2,16],75:[2,16]},{5:[2,17],18:[2,17],29:[2,17],31:[2,17],32:[2,17],33:[2,17],34:[2,17],35:[2,17],36:[2,17],43:[2,17],44:[2,17],47:[2,17],75:[2,17]},{5:[2,
18],18:[2,18],29:[2,18],31:[2,18],32:[2,18],33:[2,18],34:[2,18],35:[2,18],36:[2,18],43:[2,18],44:[2,18],47:[2,18],75:[2,18]},{5:[2,19],18:[2,19],29:[2,19],31:[2,19],32:[2,19],33:[2,19],34:[2,19],35:[2,19],36:[2,19],43:[2,19],44:[2,19],47:[2,19],75:[2,19]},{5:[2,20],18:[2,20],29:[2,20],31:[2,20],32:[2,20],33:[2,20],34:[2,20],35:[2,20],36:[2,20],43:[2,20],44:[2,20],47:[2,20],75:[2,20]},{5:[2,21],18:[2,21],29:[2,21],31:[2,21],32:[2,21],33:[2,21],34:[2,21],35:[2,21],36:[2,21],43:[2,21],44:[2,21],47:[2,
21],75:[2,21]},{5:[2,22],18:[2,22],29:[2,22],31:[2,22],32:[2,22],33:[2,22],34:[2,22],35:[2,22],36:[2,22],43:[2,22],44:[2,22],47:[2,22],75:[2,22]},{5:[2,23],18:[2,23],29:[2,23],31:[2,23],32:[2,23],33:[2,23],34:[2,23],35:[2,23],36:[2,23],43:[2,23],44:[2,23],47:[2,23],75:[2,23]},{5:[2,24],18:[2,24],29:[2,24],31:[2,24],32:[2,24],33:[2,24],34:[2,24],35:[2,24],36:[2,24],43:[2,24],44:[2,24],47:[2,24],75:[2,24]},{5:[2,25],18:[2,25],29:[2,25],31:[2,25],32:[2,25],33:[2,25],34:[2,25],35:[2,25],36:[2,25],43:[2,
25],44:[2,25],47:[2,25],49:[2,25],62:[2,25],63:[2,25],64:[2,25],65:[2,25],66:[2,25],67:[2,25],68:[2,25],69:[2,25],75:[2,25]},{5:[2,38],18:[2,38],29:[2,38],31:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],43:[2,38],44:[2,38],47:[2,38],75:[2,38]},{5:[2,39],18:[2,39],29:[2,39],31:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],43:[2,39],44:[2,39],47:[2,39],75:[2,39]},{5:[2,40],18:[2,40],29:[2,40],31:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],43:[2,40],44:[2,40],47:[2,
40],75:[2,40]},{5:[2,41],18:[2,41],29:[2,41],31:[2,41],32:[2,41],33:[2,41],34:[2,41],35:[2,41],36:[2,41],43:[2,41],44:[2,41],47:[2,41],75:[2,41]},{5:[2,42],18:[2,42],29:[2,42],31:[2,42],32:[2,42],33:[2,42],34:[2,42],35:[2,42],36:[2,42],43:[2,42],44:[2,42],47:[2,42],75:[2,42]},{5:[2,72],18:[2,72],19:[2,72],29:[2,72],31:[2,72],32:[2,72],33:[2,72],34:[2,72],35:[2,72],36:[2,72],43:[2,72],44:[2,72],47:[2,72],49:[2,72],51:[2,72],52:[2,72],62:[2,72],63:[2,72],64:[2,72],65:[2,72],66:[2,72],67:[2,72],68:[2,
72],69:[2,72],70:[2,72],71:[2,72],72:[2,72],75:[2,72]},{5:[2,73],18:[2,73],19:[2,73],29:[2,73],31:[2,73],32:[2,73],33:[2,73],34:[2,73],35:[2,73],36:[2,73],43:[2,73],44:[2,73],47:[2,73],49:[2,73],51:[2,73],52:[2,73],62:[2,73],63:[2,73],64:[2,73],65:[2,73],66:[2,73],67:[2,73],68:[2,73],69:[2,73],70:[2,73],71:[2,73],72:[2,73],75:[2,73]},{74:[1,86]},{5:[2,32],18:[2,32],29:[2,32],31:[2,32],32:[2,32],33:[2,32],34:[2,32],35:[2,32],36:[2,32],43:[2,32],44:[2,32],47:[2,32],49:[2,32],62:[2,32],63:[2,32],64:[2,
32],65:[2,32],66:[2,32],67:[2,32],68:[2,32],69:[2,32],75:[2,32]},{5:[2,33],18:[2,33],29:[2,33],31:[2,33],32:[2,33],33:[2,33],34:[2,33],35:[2,33],36:[2,33],43:[2,33],44:[2,33],47:[2,33],49:[2,33],62:[2,33],63:[2,33],64:[2,33],65:[2,33],66:[2,33],67:[2,33],68:[2,33],69:[2,33],75:[2,33]},{5:[2,34],18:[2,34],29:[2,34],31:[2,34],32:[2,34],33:[2,34],34:[2,34],35:[2,34],36:[2,34],43:[2,34],44:[2,34],47:[2,34],49:[2,34],62:[2,34],63:[2,34],64:[2,34],65:[2,34],66:[2,34],67:[2,34],68:[2,34],69:[2,34],75:[2,
34]},{5:[2,35],18:[2,35],29:[2,35],31:[2,35],32:[2,35],33:[2,35],34:[2,35],35:[2,35],36:[2,35],43:[2,35],44:[2,35],47:[2,35],49:[2,35],62:[2,35],63:[2,35],64:[2,35],65:[2,35],66:[2,35],67:[2,35],68:[2,35],69:[2,35],75:[2,35]},{5:[2,43],18:[2,43],29:[2,43],31:[2,43],32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],43:[2,43],44:[2,43],47:[2,43],75:[2,43]},{19:[1,90],47:[1,87],50:88,51:[1,89]},{47:[1,58],56:91},{13:95,18:[1,104],31:[1,19],32:[1,17],33:[1,18],34:[1,20],35:[1,21],36:[1,22],49:[1,92],
60:93,61:94,62:[1,96],63:[1,97],64:[1,98],65:[1,99],66:[1,100],67:[1,101],68:[1,102],69:[1,103]},{5:[2,74],18:[2,74],19:[2,74],29:[2,74],31:[2,74],32:[2,74],33:[2,74],34:[2,74],35:[2,74],36:[2,74],43:[2,74],44:[2,74],47:[2,74],49:[2,74],51:[2,74],52:[2,74],62:[2,74],63:[2,74],64:[2,74],65:[2,74],66:[2,74],67:[2,74],68:[2,74],69:[2,74],70:[2,74],71:[2,74],72:[2,74],75:[2,74]},{29:[2,51],47:[2,51],48:105,49:[2,51],75:[2,51]},{19:[2,45],47:[2,45],51:[2,45]},{20:106,57:35,70:[1,36],71:[1,37],72:[1,38],
75:[1,39]},{20:107,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{29:[2,56],47:[2,56],75:[2,56]},{29:[2,57],47:[2,57],75:[2,57]},{18:[2,58],31:[2,58],32:[2,58],33:[2,58],34:[2,58],35:[2,58],36:[2,58],49:[2,58],62:[2,58],63:[2,58],64:[2,58],65:[2,58],66:[2,58],67:[2,58],68:[2,58],69:[2,58]},{18:[2,60],31:[2,60],32:[2,60],33:[2,60],34:[2,60],35:[2,60],36:[2,60],49:[2,60],62:[2,60],63:[2,60],64:[2,60],65:[2,60],66:[2,60],67:[2,60],68:[2,60],69:[2,60]},{18:[2,61],31:[2,61],32:[2,61],33:[2,61],34:[2,
61],35:[2,61],36:[2,61],49:[2,61],62:[2,61],63:[2,61],64:[2,61],65:[2,61],66:[2,61],67:[2,61],68:[2,61],69:[2,61]},{20:108,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:109,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:110,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:111,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:112,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:113,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:114,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:115,
57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{31:[1,32]},{17:117,29:[2,54],47:[2,54],49:[1,116],54:25,75:[2,54]},{19:[2,47],47:[2,47],51:[2,47]},{19:[2,48],47:[2,48],51:[2,48],52:[1,118]},{18:[2,62],31:[2,62],32:[2,62],33:[2,62],34:[2,62],35:[2,62],36:[2,62],49:[2,62],62:[2,62],63:[2,62],64:[2,62],65:[2,62],66:[2,62],67:[2,62],68:[2,62],69:[2,62]},{18:[2,63],31:[2,63],32:[2,63],33:[2,63],34:[2,63],35:[2,63],36:[2,63],49:[2,63],62:[2,63],63:[2,63],64:[2,63],65:[2,63],66:[2,63],67:[2,63],68:[2,63],
69:[2,63]},{18:[2,64],31:[2,64],32:[2,64],33:[2,64],34:[2,64],35:[2,64],36:[2,64],49:[2,64],62:[2,64],63:[2,64],64:[2,64],65:[2,64],66:[2,64],67:[2,64],68:[2,64],69:[2,64]},{18:[2,65],31:[2,65],32:[2,65],33:[2,65],34:[2,65],35:[2,65],36:[2,65],49:[2,65],62:[2,65],63:[2,65],64:[2,65],65:[2,65],66:[2,65],67:[2,65],68:[2,65],69:[2,65]},{18:[2,66],31:[2,66],32:[2,66],33:[2,66],34:[2,66],35:[2,66],36:[2,66],49:[2,66],62:[2,66],63:[2,66],64:[2,66],65:[2,66],66:[2,66],67:[2,66],68:[2,66],69:[2,66]},{18:[2,
67],31:[2,67],32:[2,67],33:[2,67],34:[2,67],35:[2,67],36:[2,67],49:[2,67],62:[2,67],63:[2,67],64:[2,67],65:[2,67],66:[2,67],67:[2,67],68:[2,67],69:[2,67]},{18:[2,68],20:119,31:[2,68],32:[2,68],33:[2,68],34:[2,68],35:[2,68],36:[2,68],49:[2,68],57:35,62:[2,68],63:[2,68],64:[2,68],65:[2,68],66:[2,68],67:[2,68],68:[2,68],69:[2,68],70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:120,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{5:[2,44],18:[2,44],29:[2,44],31:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,
44],36:[2,44],43:[2,44],44:[2,44],47:[2,44],75:[2,44]},{29:[2,50],47:[2,50],49:[2,50],75:[2,50]},{29:[1,122],53:121},{20:123,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:124,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{19:[2,49],47:[2,49],51:[2,49]},{19:[2,77],47:[2,77],51:[2,77]},{18:[2,69],31:[2,69],32:[2,69],33:[2,69],34:[2,69],35:[2,69],36:[2,69],49:[2,69],62:[2,69],63:[2,69],64:[2,69],65:[2,69],66:[2,69],67:[2,69],68:[2,69],69:[2,69]},{20:125,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,
39]},{20:126,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:127,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:128,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:129,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{20:130,57:35,70:[1,36],71:[1,37],72:[1,38],75:[1,39]},{18:[2,70],31:[2,70],32:[2,70],33:[2,70],34:[2,70],35:[2,70],36:[2,70],49:[2,70],62:[2,70],63:[2,70],64:[2,70],65:[2,70],66:[2,70],67:[2,70],68:[2,70],69:[2,70]}],defaultActions:{3:[2,1]},parseError:function(a,b){if(b.recoverable)this.trace(a);
else throw Error(a);},parse:function(a){var b=[0],c=[null],e=[],j=this.table,f="",l=0,k=0,n=0;this.lexer.setInput(a);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined")this.lexer.yylloc={};a=this.lexer.yylloc;e.push(a);var p=this.lexer.options&&this.lexer.options.ranges;this.parseError=typeof this.yy.parseError==="function"?this.yy.parseError:Object.getPrototypeOf(this).parseError;for(var o,r,q,m,t={},v,s;;){q=b[b.length-1];if(this.defaultActions[q])m=
this.defaultActions[q];else{if(o===null||typeof o=="undefined"){o=void 0;o=this.lexer.lex()||1;typeof o!=="number"&&(o=this.symbols_[o]||o)}m=j[q]&&j[q][o]}if(typeof m==="undefined"||!m.length||!m[0]){var u="";s=[];for(v in j[q])this.terminals_[v]&&v>2&&s.push("'"+this.terminals_[v]+"'");u=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+s.join(", ")+", got '"+(this.terminals_[o]||o)+"'":"Parse error on line "+(l+1)+": Unexpected "+(o==1?"end of input":
"'"+(this.terminals_[o]||o)+"'");this.parseError(u,{text:this.lexer.match,token:this.terminals_[o]||o,line:this.lexer.yylineno,loc:a,expected:s})}if(m[0]instanceof Array&&m.length>1)throw Error("Parse Error: multiple actions possible at state: "+q+", token: "+o);switch(m[0]){case 1:b.push(o);c.push(this.lexer.yytext);e.push(this.lexer.yylloc);b.push(m[1]);o=null;if(r){o=r;r=null}else{k=this.lexer.yyleng;f=this.lexer.yytext;l=this.lexer.yylineno;a=this.lexer.yylloc;n>0&&n--}break;case 2:s=this.productions_[m[1]][1];
t.$=c[c.length-s];t._$={first_line:e[e.length-(s||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(s||1)].first_column,last_column:e[e.length-1].last_column};if(p)t._$.range=[e[e.length-(s||1)].range[0],e[e.length-1].range[1]];q=this.performAction.call(t,f,k,l,this.yy,m[1],c,e);if(typeof q!=="undefined")return q;if(s){b=b.slice(0,s*-2);c=c.slice(0,-1*s);e=e.slice(0,-1*s)}b.push(this.productions_[m[1]][0]);c.push(t.$);e.push(t._$);m=j[b[b.length-2]][b[b.length-1]];b.push(m);
break;case 3:return true}}return true}},c=function(){return{EOF:1,parseError:function(a,b){if(this.yy.parser)this.yy.parser.parseError(a,b);else throw Error(a);},setInput:function(a){this._input=a;this._more=this._backtrack=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges)this.yylloc.range=[0,0];this.offset=0;return this},input:function(){var a=
this._input[0];this.yytext=this.yytext+a;this.yyleng++;this.offset++;this.match=this.match+a;this.matched=this.matched+a;if(a.match(/(?:\r\n?|\n).*/g)){this.yylineno++;this.yylloc.last_line++}else this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-b-1);this.offset=this.offset-b;a=this.match.split(/(?:\r\n?|\n)/g);
this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(c.length-1)this.yylineno=this.yylineno-(c.length-1);var e=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===a.length?this.yylloc.first_column:0)+a[a.length-c.length].length-c[0].length:this.yylloc.first_column-b};if(this.options.ranges)this.yylloc.range=[e[0],e[0]+this.yyleng-b];this.yyleng=
this.yytext.length;return this},more:function(){this._more=true;return this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=true;else return this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=
this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;a.length<20&&(a=a+this._input.substr(0,20-a.length));return(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},test_match:function(a,b){var c,e;if(this.options.backtrack_lexer){e={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,
last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done};if(this.options.ranges)e.yylloc.range=this.yylloc.range.slice(0)}if(c=a[0].match(/(?:\r\n?|\n).*/g))this.yylineno=this.yylineno+c.length;this.yylloc={first_line:this.yylloc.last_line,
last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:c?c[c.length-1].length-c[c.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length};this.yytext=this.yytext+a[0];this.match=this.match+a[0];this.matches=a;this.yyleng=this.yytext.length;if(this.options.ranges)this.yylloc.range=[this.offset,this.offset=this.offset+this.yyleng];this._backtrack=this._more=false;this._input=this._input.slice(a[0].length);this.matched=this.matched+a[0];c=this.performAction.call(this,
this.yy,this,b,this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input)this.done=false;if(c)return c;if(this._backtrack)for(var j in e)this[j]=e[j];return false},next:function(){if(this.done)return this.EOF;if(!this._input)this.done=true;var a,b,c;if(!this._more)this.match=this.yytext="";for(var e=this._currentRules(),j=0;j<e.length;j++)if((b=this._input.match(this.rules[e[j]]))&&(!a||b[0].length>a[0].length)){a=b;c=j;if(this.options.backtrack_lexer){a=this.test_match(b,e[j]);
if(a!==false)return a;if(this._backtrack)a=false;else return false}else if(!this.options.flex)break}if(a){a=this.test_match(a,e[c]);return a!==false?a:false}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():
this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(a){a=this.conditionStack.length-1-Math.abs(a||0);return a>=0?this.conditionStack[a]:"INITIAL"},pushState:function(a){this.begin(a)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(a,b,c){switch(c){case 3:return 18;
case 4:return 51;case 5:return 51;case 6:return 19;case 7:return 19;case 8:return 21;case 9:return 22;case 10:return 23;case 11:return 24;case 12:return 25;case 13:return 26;case 14:return 37;case 15:return 44;case 16:return 52;case 17:return 47;case 18:return 49;case 19:return"[";case 20:return"]";case 21:return"^";case 22:return 58;case 23:return"/";case 24:return 70;case 25:return 71;case 26:return 72;case 27:return 74;case 28:return",";case 29:return 62;case 30:return 63;case 31:return 64;case 32:return 65;
case 33:return 66;case 34:return 67;case 35:return 68;case 36:return 69;case 37:return 32;case 38:return 32;case 39:return 35;case 40:return 35;case 41:return 36;case 42:return 36;case 43:return 33;case 44:return 33;case 45:return 31;case 46:return 30;case 47:return 34;case 48:return 38;case 49:return 39;case 50:return 40;case 51:return 5;case 52:return 75;case 53:return 75;case 54:return 41;case 55:return 42;case 56:return 29;case 57:return 43;case 58:return 28;case 59:return 27}},rules:[/^(?:\s+)/,
/^(?:\/\/.*)/,/^(?:\/\*[\w\W]*?\*\/)/,/^(?:set\b)/,/^(?:w\b)/,/^(?:weight\b)/,/^(?:md\b)/,/^(?:maxdepth\b)/,/^(?:maxobjects\b)/,/^(?:minsize\b)/,/^(?:maxsize\b)/,/^(?:seed\b)/,/^(?:initial\b)/,/^(?:background\b)/,/^(?:colorpool\b)/,/^(?:rule\b)/,/^(?:>)/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:\^)/,/^(?:\*)/,/^(?:\/)/,/^(?:\+)/,/^(?:-)/,/^(?:\()/,/^(?:\))/,/^(?:,)/,/^(?:x\b)/,/^(?:y\b)/,/^(?:z\b)/,/^(?:rx\b)/,/^(?:ry\b)/,/^(?:rz\b)/,/^(?:s\b)/,/^(?:m\b)/,/^(?:hue\b)/,/^(?:h\b)/,/^(?:saturation\b)/,
/^(?:sat\b)/,/^(?:brightness\b)/,/^(?:b\b)/,/^(?:alpha\b)/,/^(?:a\b)/,/^(?:color\b)/,/^(?:random\b)/,/^(?:blend\b)/,/^(?:randomhue\b)/,/^(?:randomrgb\b)/,/^(?:greyscale\b)/,/^(?:$)/,/^(?:[0-9]+(\.[0-9]*)?)/,/^(?:\.[0-9]+)/,/^(?:list:[\w,]+)/,/^(?:image:[\w\.\w]+)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/,/^(?:#define\b)/,/^(?:#[a-fA-F0-9]{6})/,/^(?:#[a-fA-F0-9]{3})/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,
41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],inclusive:true}}}}();a.lexer=c;b.prototype=a;a.Parser=b;return new b}();"undefined"!==typeof require&&"undefined"!==typeof u&&(u.parser=C,u.Parser=C.Parser,u.parse=function(){return C.parse.apply(C,arguments)},u.main=function(b){if(!b[1]){console.log("Usage: "+b[0]+" FILE");process.exit(1)}b=require("fs").readFileSync(require("path").normalize(b[1]),"utf8");return u.parser.parse(b)},"undefined"!==typeof module&&require.main===module&&u.main(process.argv.slice(1)));
u.TestRenderer=function(b,a){this.width=a.width||window.innerWidth;this.height=a.height||window.innerHeight;this.scene=new THREE.Scene;this.group=new THREE.Object3D;this.camera=new THREE.PerspectiveCamera(75,this.width/this.height,1,1E3);this.camera.target=new THREE.Vector3(0,0,0);this.resetCamera().updateCamera();this.geometry={cube:new THREE.CubeGeometry(1,1,1),sphere:new THREE.SphereGeometry(0.5,40,32)};this.scene.add(this.camera);this.scene.add(this.group);this.renderer=new THREE.WebGLRenderer({antialias:true});
this.domElement=this.renderer.domElement;this.build(b)};u.TestRenderer.prototype.build=function(b){this.removeAll();if(b.constructor===Array)for(var a=0;a<b.length;a++)switch(b[a].type){case P:this.clearColor(b[a].color);break;case O:this.add(b[a])}return this};u.TestRenderer.prototype.clearColor=function(b){this.renderer.setClearColor(new THREE.Color(b),1);return this};u.TestRenderer.prototype.add=function(b){var a;switch(b.name){case "box":a=this.geometry.cube;break;case "sphere":a=this.geometry.sphere;
break;case "grid":b.wireframe=true;a=this.geometry.cube}a=new THREE.Mesh(a,new THREE.MeshBasicMaterial(b));a.applyMatrix(b.matrix);this.group.add(a);return this};u.TestRenderer.prototype.removeAll=function(){for(var b=this.group.children,a=0;a<b.length;a++)this.group.remove(b[a])};u.TestRenderer.prototype.resetCamera=function(){this.lon=this.lon||45;this.lonstep=this.lonstep||0.5;this.lat=this.lat||45;this.phi=this.phi||0;this.theta=this.theta||0;this.d=this.d||30;return this};u.TestRenderer.prototype.updateCamera=
function(){this.lat=this.lat<-85?-85:this.lat>85?85:this.lat;this.phi=K(90-this.lat);this.theta=K(this.lon);this.camera.position.x=this.d*Math.sin(this.phi)*Math.cos(this.theta);this.camera.position.y=this.d*Math.cos(this.phi);this.camera.position.z=this.d*Math.sin(this.phi)*Math.sin(this.theta);this.camera.lookAt(this.camera.target);return this};u.TestRenderer.prototype.clear=function(){this.removeAll();this.renderer.render(this.scene,this.camera);return this};u.TestRenderer.prototype.resize=function(b,
a){this.width=b;this.height=a;return this};u.TestRenderer.prototype.update=function(){this.lon=this.lon+this.lonstep;this.updateCamera();return this};u.TestRenderer.prototype.render=function(){this.renderer.sortObjects=false;this.renderer.setSize(this.width,this.height);this.renderer.render(this.scene,this.camera);return this};u.TestRenderer.prototype.saveImage=function(){window.open(this.renderer.domElement.toDataURL("image/png"));return this};la="define";L="set";ma="statement";ka="rule";na="modifier";
Q="maxdepth";ea="maxobjects";fa="minsize";ga="maxsize";ha="seed";ja="weight";P=ia="background";O="primitive";R="xshift";S="yshift";T="zshift";U="rotatex";V="rotatey";W="rotatez";X="size";Y="matrix";Z="color";$="hue";aa="saturation";ba="brightness";ca="blend";da="alpha";var qa={Box:"box",Grid:"grid",Sphere:"sphere"},N=function(){var b=this,a=b._,c={},d=Array.prototype,h=Object.prototype,i=d.push,e=d.slice,j=d.concat,f=h.toString,l=h.hasOwnProperty,k=d.forEach,n=d.map,p=d.reduce,o=d.reduceRight,r=d.filter,
q=d.every,m=d.some,t=d.indexOf,v=d.lastIndexOf,h=Array.isArray,s=Object.keys,u=Function.prototype.bind,g=function(a){if(a instanceof g)return a;if(!(this instanceof g))return new g(a);this._wrapped=a};g.VERSION="1.5.1";var w=g.each=g.forEach=function(a,b,d){if(a!=null)if(k&&a.forEach===k)a.forEach(b,d);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++){if(b.call(d,a[e],e,a)===c)break}else for(e in a)if(g.has(a,e)&&b.call(d,a[e],e,a)===c)break};g.map=g.collect=function(a,b,c){var d=[];if(a==
null)return d;if(n&&a.map===n)return a.map(b,c);w(a,function(a,y,e){d.push(b.call(c,a,y,e))});return d};g.reduce=g.foldl=g.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(p&&a.reduce===p){d&&(b=g.bind(b,d));return e?a.reduce(b,c):a.reduce(b)}w(a,function(a,y,g){if(e)c=b.call(d,c,a,y,g);else{c=a;e=true}});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c};g.reduceRight=g.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(o&&a.reduceRight===
o){d&&(b=g.bind(b,d));return e?a.reduceRight(b,c):a.reduceRight(b)}var f=a.length;if(f!==+f)var h=g.keys(a),f=h.length;w(a,function(g,i,j){i=h?h[--f]:--f;if(e)c=b.call(d,c,a[i],i,j);else{c=a[i];e=true}});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c};g.find=g.detect=function(a,b,c){var d;z(a,function(a,y,e){if(b.call(c,a,y,e)){d=a;return true}});return d};g.filter=g.select=function(a,b,c){var d=[];if(a==null)return d;if(r&&a.filter===r)return a.filter(b,c);w(a,
function(a,y,e){b.call(c,a,y,e)&&d.push(a)});return d};g.reject=function(a,b,c){return g.filter(a,function(a,y,d){return!b.call(c,a,y,d)},c)};g.every=g.all=function(a,b,d){b||(b=g.identity);var e=true;if(a==null)return e;if(q&&a.every===q)return a.every(b,d);w(a,function(a,y,g){if(!(e=e&&b.call(d,a,y,g)))return c});return!!e};var z=g.some=g.any=function(a,b,d){b||(b=g.identity);var e=false;if(a==null)return e;if(m&&a.some===m)return a.some(b,d);w(a,function(a,y,g){if(e||(e=b.call(d,a,y,g)))return c});
return!!e};g.contains=g.include=function(a,b){return a==null?false:t&&a.indexOf===t?a.indexOf(b)!=-1:z(a,function(a){return a===b})};g.invoke=function(a,b){var c=e.call(arguments,2),d=g.isFunction(b);return g.map(a,function(a){return(d?b:a[b]).apply(a,c)})};g.pluck=function(a,b){return g.map(a,function(a){return a[b]})};g.where=function(a,b,c){return g.isEmpty(b)?c?void 0:[]:g[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return false;return true})};g.findWhere=function(a,b){return g.where(a,
b,true)};g.max=function(a,b,c){if(!b&&g.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&g.isEmpty(a))return-Infinity;var d={computed:-Infinity,value:-Infinity};w(a,function(a,y,e){y=b?b.call(c,a,y,e):a;y>d.computed&&(d={value:a,computed:y})});return d.value};g.min=function(a,b,c){if(!b&&g.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&g.isEmpty(a))return Infinity;var d={computed:Infinity,value:Infinity};w(a,function(a,y,e){y=b?b.call(c,
a,y,e):a;y<d.computed&&(d={value:a,computed:y})});return d.value};g.shuffle=function(a){var b,c=0,d=[];w(a,function(a){b=g.random(c++);d[c-1]=d[b];d[b]=a});return d};var x=function(a){return g.isFunction(a)?a:function(b){return b[a]}};g.sortBy=function(a,b,c){var d=x(b);return g.pluck(g.map(a,function(a,b,y){return{value:a,index:b,criteria:d.call(c,a,b,y)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||c===void 0)return 1;if(c<d||d===void 0)return-1}return a.index<b.index?-1:
1}),"value")};var oa=function(a,b,c,d){var e={},f=x(b==null?g.identity:b);w(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)});return e};g.groupBy=function(a,b,c){return oa(a,b,c,function(a,b,c){(g.has(a,b)?a[b]:a[b]=[]).push(c)})};g.countBy=function(a,b,c){return oa(a,b,c,function(a,b){g.has(a,b)||(a[b]=0);a[b]++})};g.sortedIndex=function(a,b,c,d){for(var c=c==null?g.identity:x(c),b=c.call(d,b),e=0,f=a.length;e<f;){var h=e+f>>>1;c.call(d,a[h])<b?e=h+1:f=h}return e};g.toArray=function(a){return!a?[]:
g.isArray(a)?e.call(a):a.length===+a.length?g.map(a,g.identity):g.values(a)};g.size=function(a){return a==null?0:a.length===+a.length?a.length:g.keys(a).length};g.first=g.head=g.take=function(a,b,c){return a==null?void 0:b!=null&&!c?e.call(a,0,b):a[0]};g.initial=function(a,b,c){return e.call(a,0,a.length-(b==null||c?1:b))};g.last=function(a,b,c){return a==null?void 0:b!=null&&!c?e.call(a,Math.max(a.length-b,0)):a[a.length-1]};g.rest=g.tail=g.drop=function(a,b,c){return e.call(a,b==null||c?1:b)};g.compact=
function(a){return g.filter(a,g.identity)};var G=function(a,b,c){if(b&&g.every(a,g.isArray))return j.apply(c,a);w(a,function(a){g.isArray(a)||g.isArguments(a)?b?i.apply(c,a):G(a,b,c):c.push(a)});return c};g.flatten=function(a,b){return G(a,b,[])};g.without=function(a){return g.difference(a,e.call(arguments,1))};g.uniq=g.unique=function(a,b,c,d){if(g.isFunction(b)){d=c;c=b;b=false}var c=c?g.map(a,c,d):a,e=[],f=[];w(c,function(c,d){if(b?!d||f[f.length-1]!==c:!g.contains(f,c)){f.push(c);e.push(a[d])}});
return e};g.union=function(){return g.uniq(g.flatten(arguments,true))};g.intersection=function(a){var b=e.call(arguments,1);return g.filter(g.uniq(a),function(a){return g.every(b,function(b){return g.indexOf(b,a)>=0})})};g.difference=function(a){var b=j.apply(d,e.call(arguments,1));return g.filter(a,function(a){return!g.contains(b,a)})};g.zip=function(){for(var a=g.max(g.pluck(arguments,"length").concat(0)),b=Array(a),c=0;c<a;c++)b[c]=g.pluck(arguments,""+c);return b};g.object=function(a,b){if(a==
null)return{};for(var c={},d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c};g.indexOf=function(a,b,c){if(a==null)return-1;var d=0,e=a.length;if(c)if(typeof c=="number")d=c<0?Math.max(0,e+c):c;else{d=g.sortedIndex(a,b);return a[d]===b?d:-1}if(t&&a.indexOf===t)return a.indexOf(b,c);for(;d<e;d++)if(a[d]===b)return d;return-1};g.lastIndexOf=function(a,b,c){if(a==null)return-1;var d=c!=null;if(v&&a.lastIndexOf===v)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(c=d?c:a.length;c--;)if(a[c]===
b)return c;return-1};g.range=function(a,b,c){if(arguments.length<=1){b=a||0;a=0}for(var c=arguments[2]||1,d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);e<d;){f[e++]=a;a=a+c}return f};var D=function(){};g.bind=function(a,b){var c,d;if(u&&a.bind===u)return u.apply(a,e.call(arguments,1));if(!g.isFunction(a))throw new TypeError;c=e.call(arguments,2);return d=function(){if(!(this instanceof d))return a.apply(b,c.concat(e.call(arguments)));D.prototype=a.prototype;var f=new D;D.prototype=null;var g=a.apply(f,
c.concat(e.call(arguments)));return Object(g)===g?g:f}};g.partial=function(a){var b=e.call(arguments,1);return function(){return a.apply(this,b.concat(e.call(arguments)))}};g.bindAll=function(a){var b=e.call(arguments,1);if(b.length===0)throw Error("bindAll must be passed function names");w(b,function(b){a[b]=g.bind(a[b],a)});return a};g.memoize=function(a,b){var c={};b||(b=g.identity);return function(){var d=b.apply(this,arguments);return g.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}};g.delay=function(a,
b){var c=e.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};g.defer=function(a){return g.delay.apply(g,[a,1].concat(e.call(arguments,1)))};g.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===false?0:new Date;g=null;f=a.apply(d,e)};return function(){var j=new Date;!h&&c.leading===false&&(h=j);var k=b-(j-h);d=this;e=arguments;if(k<=0){clearTimeout(g);g=null;h=j;f=a.apply(d,e)}else!g&&c.trailing!==false&&(g=setTimeout(i,k));return f}};g.debounce=
function(a,b,c){var d,e=null;return function(){var f=this,g=arguments,h=c&&!e;clearTimeout(e);e=setTimeout(function(){e=null;c||(d=a.apply(f,g))},b);h&&(d=a.apply(f,g));return d}};g.once=function(a){var b=false,c;return function(){if(b)return c;b=true;c=a.apply(this,arguments);a=null;return c}};g.wrap=function(a,b){return function(){var c=[a];i.apply(c,arguments);return b.apply(this,c)}};g.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,
b)];return b[0]}};g.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}};g.keys=s||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)g.has(a,c)&&b.push(c);return b};g.values=function(a){var b=[],c;for(c in a)g.has(a,c)&&b.push(a[c]);return b};g.pairs=function(a){var b=[],c;for(c in a)g.has(a,c)&&b.push([c,a[c]]);return b};g.invert=function(a){var b={},c;for(c in a)g.has(a,c)&&(b[a[c]]=c);return b};g.functions=g.methods=function(a){var b=
[],c;for(c in a)g.isFunction(a[c])&&b.push(c);return b.sort()};g.extend=function(a){w(e.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]});return a};g.pick=function(a){var b={},c=j.apply(d,e.call(arguments,1));w(c,function(c){c in a&&(b[c]=a[c])});return b};g.omit=function(a){var b={},c=j.apply(d,e.call(arguments,1)),f;for(f in a)g.contains(c,f)||(b[f]=a[f]);return b};g.defaults=function(a){w(e.call(arguments,1),function(b){if(b)for(var c in b)a[c]===void 0&&(a[c]=b[c])});return a};g.clone=
function(a){return!g.isObject(a)?a:g.isArray(a)?a.slice():g.extend({},a)};g.tap=function(a,b){b(a);return a};var E=function(a,b,c,d){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a instanceof g)a=a._wrapped;if(b instanceof g)b=b._wrapped;var e=f.call(a);if(e!=f.call(b))return false;switch(e){case "[object String]":return a==""+b;case "[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==
b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return false;for(var h=c.length;h--;)if(c[h]==a)return d[h]==b;var h=a.constructor,i=b.constructor;if(h!==i&&(!g.isFunction(h)||!(h instanceof h&&g.isFunction(i)&&i instanceof i)))return false;c.push(a);d.push(b);h=0;i=true;if(e=="[object Array]"){h=a.length;if(i=h==b.length)for(;h--;)if(!(i=E(a[h],b[h],c,d)))break}else{for(var j in a)if(g.has(a,j)){h++;if(!(i=g.has(b,j)&&E(a[j],
b[j],c,d)))break}if(i){for(j in b)if(g.has(b,j)&&!h--)break;i=!h}}c.pop();d.pop();return i};g.isEqual=function(a,b){return E(a,b,[],[])};g.isEmpty=function(a){if(a==null)return true;if(g.isArray(a)||g.isString(a))return a.length===0;for(var b in a)if(g.has(a,b))return false;return true};g.isElement=function(a){return!!(a&&a.nodeType===1)};g.isArray=h||function(a){return f.call(a)=="[object Array]"};g.isObject=function(a){return a===Object(a)};w(["Arguments","Function","String","Number","Date","RegExp"],
function(a){g["is"+a]=function(b){return f.call(b)=="[object "+a+"]"}});if(!g.isArguments(arguments))g.isArguments=function(a){return!(!a||!g.has(a,"callee"))};if(typeof/./!=="function")g.isFunction=function(a){return typeof a==="function"};g.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};g.isNaN=function(a){return g.isNumber(a)&&a!=+a};g.isBoolean=function(a){return a===true||a===false||f.call(a)=="[object Boolean]"};g.isNull=function(a){return a===null};g.isUndefined=function(a){return a===
void 0};g.has=function(a,b){return l.call(a,b)};g.noConflict=function(){b._=a;return this};g.identity=function(a){return a};g.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;e<a;e++)d[e]=b.call(c,e);return d};g.random=function(a,b){if(b==null){b=a;a=0}return a+Math.floor(Math.random()*(b-a+1))};var B={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};B.unescape=g.invert(B.escape);var A={escape:RegExp("["+g.keys(B.escape).join("")+"]","g"),unescape:RegExp("("+
g.keys(B.unescape).join("|")+")","g")};g.each(["escape","unescape"],function(a){g[a]=function(b){return b==null?"":(""+b).replace(A[a],function(b){return B[a][b]})}});g.result=function(a,b){if(a!=null){var c=a[b];return g.isFunction(c)?c.call(a):c}};g.mixin=function(a){w(g.functions(a),function(b){var c=g[b]=a[b];g.prototype[b]=function(){var a=[this._wrapped];i.apply(a,arguments);a=c.apply(g,a);return this._chain?g(a).chain():a}})};var H=0;g.uniqueId=function(a){var b=++H+"";return a?a+b:b};g.templateSettings=
{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},J=/\\|'|\r|\n|\t|\u2028|\u2029/g;g.template=function(a,b,c){var d,c=g.defaults({},c,g.templateSettings),e=RegExp([(c.escape||F).source,(c.interpolate||F).source,(c.evaluate||F).source].join("|")+"|$","g"),f=0,h="__p+='";a.replace(e,function(b,c,d,e,g){h=h+a.slice(f,g).replace(J,function(a){return"\\"+I[a]});c&&(h=h+("'+\n((__t=("+
c+"))==null?'':_.escape(__t))+\n'"));d&&(h=h+("'+\n((__t=("+d+"))==null?'':__t)+\n'"));e&&(h=h+("';\n"+e+"\n__p+='"));f=g+b.length;return b});h=h+"';\n";c.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{d=new Function(c.variable||"obj","_",h)}catch(i){i.source=h;throw i;}if(b)return d(b,g);b=function(a){return d.call(this,a,g)};b.source="function("+(c.variable||"obj")+"){\n"+h+"}";return b};
g.chain=function(a){return g(a).chain()};g.mixin(g);w(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];g.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);(a=="shift"||a=="splice")&&c.length===0&&delete c[0];return this._chain?g(c).chain():c}});w(["concat","join","slice"],function(a){var b=d[a];g.prototype[a]=function(){var a=b.apply(this._wrapped,arguments);return this._chain?g(a).chain():a}});g.extend(g.prototype,{chain:function(){this._chain=true;
return this},value:function(){return this._wrapped}});return g}(N),K=function(){var b=Math.PI/180;return function(a){return a*b}}();(function(){var b=180/Math.PI;return function(a){return a*b}})();var pa=function(b,a,c,d,h,i,e,j,f,l,k,n,p,o,r,q){var m=this.elements=new Float32Array(16);m[0]=b!==void 0?b:1;m[4]=a||0;m[8]=c||0;m[12]=d||0;m[1]=h||0;m[5]=i!==void 0?i:1;m[9]=e||0;m[13]=j||0;m[2]=f||0;m[6]=l||0;m[10]=k!==void 0?k:1;m[14]=n||0;m[3]=p||0;m[7]=o||0;m[11]=r||0;m[15]=q!==void 0?q:1};pa.prototype=
{set:function(b,a,c,d,h,i,e,j,f,l,k,n,p,o,r,q){var m=this.elements;m[0]=b;m[4]=a;m[8]=c;m[12]=d;m[1]=h;m[5]=i;m[9]=e;m[13]=j;m[2]=f;m[6]=l;m[10]=k;m[14]=n;m[3]=p;m[7]=o;m[11]=r;m[15]=q;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(b){b=b.elements;this.set(b[0],b[4],b[8],b[12],b[1],b[5],b[9],b[13],b[2],b[6],b[10],b[14],b[3],b[7],b[11],b[15]);return this},setRotationFromEuler:function(b,a){var c=this.elements,d=b.x,h=b.y,i=b.z,e=Math.cos(d),d=
Math.sin(d),j=Math.cos(h),h=Math.sin(h),f=Math.cos(i),i=Math.sin(i);if(a===void 0||a==="XYZ"){var l=e*f,k=e*i,n=d*f,p=d*i;c[0]=j*f;c[4]=-j*i;c[8]=h;c[1]=k+n*h;c[5]=l-p*h;c[9]=-d*j;c[2]=p-l*h;c[6]=n+k*h;c[10]=e*j}else if(a==="YXZ"){l=j*f;k=j*i;n=h*f;p=h*i;c[0]=l+p*d;c[4]=n*d-k;c[8]=e*h;c[1]=e*i;c[5]=e*f;c[9]=-d;c[2]=k*d-n;c[6]=p+l*d;c[10]=e*j}else if(a==="ZXY"){l=j*f;k=j*i;n=h*f;p=h*i;c[0]=l-p*d;c[4]=-e*i;c[8]=n+k*d;c[1]=k+n*d;c[5]=e*f;c[9]=p-l*d;c[2]=-e*h;c[6]=d;c[10]=e*j}else if(a==="ZYX"){l=e*f;
k=e*i;n=d*f;p=d*i;c[0]=j*f;c[4]=n*h-k;c[8]=l*h+p;c[1]=j*i;c[5]=p*h+l;c[9]=k*h-n;c[2]=-h;c[6]=d*j;c[10]=e*j}else if(a==="YZX"){l=e*j;k=e*h;n=d*j;p=d*h;c[0]=j*f;c[4]=p-l*i;c[8]=n*i+k;c[1]=i;c[5]=e*f;c[9]=-d*f;c[2]=-h*f;c[6]=k*i+n;c[10]=l-p*i}else if(a==="XZY"){l=e*j;k=e*h;n=d*j;p=d*h;c[0]=j*f;c[4]=-i;c[8]=h*f;c[1]=l*i+p;c[5]=e*f;c[9]=k*i-n;c[2]=n*i-k;c[6]=d*f;c[10]=p*i+l}return this},setRotationFromQuaternion:function(b){var a=this.elements,c=b.x,d=b.y,h=b.z,i=b.w,e=c+c,j=d+d,f=h+h,b=c*e,l=c*j,c=c*
f,k=d*j,d=d*f,h=h*f,e=i*e,j=i*j,i=i*f;a[0]=1-(k+h);a[4]=l-i;a[8]=c+j;a[1]=l+i;a[5]=1-(b+h);a[9]=d-e;a[2]=c-j;a[6]=d+e;a[10]=1-(b+k);return this},lookAt:function(){var b=new THREE.Vector3,a=new THREE.Vector3,c=new THREE.Vector3;return function(d,h,i){var e=this.elements;c.subVectors(d,h).normalize();if(c.length()===0)c.z=1;b.crossVectors(i,c).normalize();if(b.length()===0){c.x=c.x+1.0E-4;b.crossVectors(i,c).normalize()}a.crossVectors(c,b);e[0]=b.x;e[4]=a.x;e[8]=c.x;e[1]=b.y;e[5]=a.y;e[9]=c.y;e[2]=
b.z;e[6]=a.z;e[10]=c.z;return this}}(),multiply:function(b,a){if(a!==void 0){console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.");return this.multiplyMatrices(b,a)}return this.multiplyMatrices(this,b)},multiplyMatrices:function(b,a){var c=b.elements,d=a.elements,h=this.elements,i=c[0],e=c[4],j=c[8],f=c[12],l=c[1],k=c[5],n=c[9],p=c[13],o=c[2],r=c[6],q=c[10],m=c[14],t=c[3],v=c[7],s=c[11],c=c[15],u=d[0],g=d[4],w=d[8],x=d[12],z=d[1],A=
d[5],G=d[9],D=d[13],E=d[2],B=d[6],C=d[10],H=d[14],F=d[3],I=d[7],J=d[11],d=d[15];h[0]=i*u+e*z+j*E+f*F;h[4]=i*g+e*A+j*B+f*I;h[8]=i*w+e*G+j*C+f*J;h[12]=i*x+e*D+j*H+f*d;h[1]=l*u+k*z+n*E+p*F;h[5]=l*g+k*A+n*B+p*I;h[9]=l*w+k*G+n*C+p*J;h[13]=l*x+k*D+n*H+p*d;h[2]=o*u+r*z+q*E+m*F;h[6]=o*g+r*A+q*B+m*I;h[10]=o*w+r*G+q*C+m*J;h[14]=o*x+r*D+q*H+m*d;h[3]=t*u+v*z+s*E+c*F;h[7]=t*g+v*A+s*B+c*I;h[11]=t*w+v*G+s*C+c*J;h[15]=t*x+v*D+s*H+c*d;return this},multiplyToArray:function(b,a,c){var d=this.elements;this.multiplyMatrices(b,
a);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(b){var a=this.elements;a[0]=a[0]*b;a[4]=a[4]*b;a[8]=a[8]*b;a[12]=a[12]*b;a[1]=a[1]*b;a[5]=a[5]*b;a[9]=a[9]*b;a[13]=a[13]*b;a[2]=a[2]*b;a[6]=a[6]*b;a[10]=a[10]*b;a[14]=a[14]*b;a[3]=a[3]*b;a[7]=a[7]*b;a[11]=a[11]*b;a[15]=a[15]*b;return this},multiplyVector3:function(b){console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return b.applyProjection(this)},multiplyVector4:function(b){console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return b.applyMatrix4(this)},multiplyVector3Array:function(){var b=new THREE.Vector3;return function(a){for(var c=0,d=a.length;c<d;c=c+3){b.x=a[c];b.y=a[c+1];b.z=a[c+2];b.applyProjection(this);a[c]=b.x;a[c+1]=b.y;a[c+2]=b.z}return a}}(),rotateAxis:function(b){var a=this.elements,c=b.x,d=b.y,h=b.z;b.x=c*a[0]+d*a[4]+h*a[8];
b.y=c*a[1]+d*a[5]+h*a[9];b.z=c*a[2]+d*a[6]+h*a[10];b.normalize();return b},crossVector:function(b){var a=this.elements,c=new THREE.Vector4;c.x=a[0]*b.x+a[4]*b.y+a[8]*b.z+a[12]*b.w;c.y=a[1]*b.x+a[5]*b.y+a[9]*b.z+a[13]*b.w;c.z=a[2]*b.x+a[6]*b.y+a[10]*b.z+a[14]*b.w;c.w=b.w?a[3]*b.x+a[7]*b.y+a[11]*b.z+a[15]*b.w:1;return c},determinant:function(){var b=this.elements,a=b[0],c=b[4],d=b[8],h=b[12],i=b[1],e=b[5],j=b[9],f=b[13],l=b[2],k=b[6],n=b[10],p=b[14];return b[3]*(+h*j*k-d*f*k-h*e*n+c*f*n+d*e*p-c*j*p)+
b[7]*(+a*j*p-a*f*n+h*i*n-d*i*p+d*f*l-h*j*l)+b[11]*(+a*f*k-a*e*p-h*i*k+c*i*p+h*e*l-c*f*l)+b[15]*(-d*e*l-a*j*k+a*e*n+d*i*k-c*i*n+c*j*l)},transpose:function(){var b=this.elements,a;a=b[1];b[1]=b[4];b[4]=a;a=b[2];b[2]=b[8];b[8]=a;a=b[6];b[6]=b[9];b[9]=a;a=b[3];b[3]=b[12];b[12]=a;a=b[7];b[7]=b[13];b[13]=a;a=b[11];b[11]=b[14];b[14]=a;return this},flattenToArray:function(b){var a=this.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];
b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},flattenToArrayOffset:function(b,a){var c=this.elements;b[a]=c[0];b[a+1]=c[1];b[a+2]=c[2];b[a+3]=c[3];b[a+4]=c[4];b[a+5]=c[5];b[a+6]=c[6];b[a+7]=c[7];b[a+8]=c[8];b[a+9]=c[9];b[a+10]=c[10];b[a+11]=c[11];b[a+12]=c[12];b[a+13]=c[13];b[a+14]=c[14];b[a+15]=c[15];return b},getPosition:function(){var b=new THREE.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");
var a=this.elements;return b.set(a[12],a[13],a[14])}}(),setPosition:function(b){var a=this.elements;a[12]=b.x;a[13]=b.y;a[14]=b.z;return this},getInverse:function(b,a){var c=this.elements,d=b.elements,h=d[0],i=d[4],e=d[8],j=d[12],f=d[1],l=d[5],k=d[9],n=d[13],p=d[2],o=d[6],r=d[10],q=d[14],m=d[3],t=d[7],v=d[11],s=d[15];c[0]=k*q*t-n*r*t+n*o*v-l*q*v-k*o*s+l*r*s;c[4]=j*r*t-e*q*t-j*o*v+i*q*v+e*o*s-i*r*s;c[8]=e*n*t-j*k*t+j*l*v-i*n*v-e*l*s+i*k*s;c[12]=j*k*o-e*n*o-j*l*r+i*n*r+e*l*q-i*k*q;c[1]=n*r*m-k*q*m-
n*p*v+f*q*v+k*p*s-f*r*s;c[5]=e*q*m-j*r*m+j*p*v-h*q*v-e*p*s+h*r*s;c[9]=j*k*m-e*n*m-j*f*v+h*n*v+e*f*s-h*k*s;c[13]=e*n*p-j*k*p+j*f*r-h*n*r-e*f*q+h*k*q;c[2]=l*q*m-n*o*m+n*p*t-f*q*t-l*p*s+f*o*s;c[6]=j*o*m-i*q*m-j*p*t+h*q*t+i*p*s-h*o*s;c[10]=i*n*m-j*l*m+j*f*t-h*n*t-i*f*s+h*l*s;c[14]=j*l*p-i*n*p-j*f*o+h*n*o+i*f*q-h*l*q;c[3]=k*o*m-l*r*m-k*p*t+f*r*t+l*p*v-f*o*v;c[7]=i*r*m-e*o*m+e*p*t-h*r*t-i*p*v+h*o*v;c[11]=e*l*m-i*k*m-e*f*t+h*k*t+i*f*v-h*l*v;c[15]=i*k*p-e*l*p+e*f*o-h*k*o-i*f*r+h*l*r;c=d[0]*c[0]+d[1]*c[4]+
d[2]*c[8]+d[3]*c[12];if(c==0){if(a)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},compose:function(){var b=new THREE.Matrix4,a=new THREE.Matrix4;return function(c,d,h){var i=this.elements;b.identity();b.setRotationFromQuaternion(d);a.makeScale(h.x,h.y,h.z);this.multiplyMatrices(b,a);i[12]=c.x;i[13]=c.y;i[14]=c.z;return this}}(),decompose:function(){var b=
new THREE.Vector3,a=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Matrix4;return function(h,i,e){var j=this.elements;b.set(j[0],j[1],j[2]);a.set(j[4],j[5],j[6]);c.set(j[8],j[9],j[10]);h=h instanceof THREE.Vector3?h:new THREE.Vector3;i=i instanceof THREE.Quaternion?i:new THREE.Quaternion;e=e instanceof THREE.Vector3?e:new THREE.Vector3;e.x=b.length();e.y=a.length();e.z=c.length();h.x=j[12];h.y=j[13];h.z=j[14];d.copy(this);d.elements[0]=d.elements[0]/e.x;d.elements[1]=d.elements[1]/e.x;d.elements[2]=
d.elements[2]/e.x;d.elements[4]=d.elements[4]/e.y;d.elements[5]=d.elements[5]/e.y;d.elements[6]=d.elements[6]/e.y;d.elements[8]=d.elements[8]/e.z;d.elements[9]=d.elements[9]/e.z;d.elements[10]=d.elements[10]/e.z;i.setFromRotationMatrix(d);return[h,i,e]}}(),extractPosition:function(b){var a=this.elements,b=b.elements;a[12]=b[12];a[13]=b[13];a[14]=b[14];return this},extractRotation:function(){var b=new THREE.Vector3;return function(a){var c=this.elements,a=a.elements,d=1/b.set(a[0],a[1],a[2]).length(),
h=1/b.set(a[4],a[5],a[6]).length(),i=1/b.set(a[8],a[9],a[10]).length();c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[4]=a[4]*h;c[5]=a[5]*h;c[6]=a[6]*h;c[8]=a[8]*i;c[9]=a[9]*i;c[10]=a[10]*i;return this}}(),translate:function(b){var a=this.elements,c=b.x,d=b.y,b=b.z;a[12]=a[0]*c+a[4]*d+a[8]*b+a[12];a[13]=a[1]*c+a[5]*d+a[9]*b+a[13];a[14]=a[2]*c+a[6]*d+a[10]*b+a[14];a[15]=a[3]*c+a[7]*d+a[11]*b+a[15];return this},rotateX:function(b){var a=this.elements,c=a[4],d=a[5],h=a[6],i=a[7],e=a[8],j=a[9],f=a[10],l=a[11],
k=Math.cos(b),b=Math.sin(b);a[4]=k*c+b*e;a[5]=k*d+b*j;a[6]=k*h+b*f;a[7]=k*i+b*l;a[8]=k*e-b*c;a[9]=k*j-b*d;a[10]=k*f-b*h;a[11]=k*l-b*i;return this},rotateY:function(b){var a=this.elements,c=a[0],d=a[1],h=a[2],i=a[3],e=a[8],j=a[9],f=a[10],l=a[11],k=Math.cos(b),b=Math.sin(b);a[0]=k*c-b*e;a[1]=k*d-b*j;a[2]=k*h-b*f;a[3]=k*i-b*l;a[8]=k*e+b*c;a[9]=k*j+b*d;a[10]=k*f+b*h;a[11]=k*l+b*i;return this},rotateZ:function(b){var a=this.elements,c=a[0],d=a[1],h=a[2],i=a[3],e=a[4],j=a[5],f=a[6],l=a[7],k=Math.cos(b),
b=Math.sin(b);a[0]=k*c+b*e;a[1]=k*d+b*j;a[2]=k*h+b*f;a[3]=k*i+b*l;a[4]=k*e-b*c;a[5]=k*j-b*d;a[6]=k*f-b*h;a[7]=k*l-b*i;return this},rotateByAxis:function(b,a){var c=this.elements;if(b.x===1&&b.y===0&&b.z===0)return this.rotateX(a);if(b.x===0&&b.y===1&&b.z===0)return this.rotateY(a);if(b.x===0&&b.y===0&&b.z===1)return this.rotateZ(a);var d=b.x,h=b.y,i=b.z,e=Math.sqrt(d*d+h*h+i*i),d=d/e,h=h/e,i=i/e,e=d*d,j=h*h,f=i*i,l=Math.cos(a),k=Math.sin(a),n=1-l,p=d*h*n,o=d*i*n,n=h*i*n,d=d*k,r=h*k,k=i*k,i=e+(1-e)*
l,e=p+k,h=o-r,p=p-k,j=j+(1-j)*l,k=n+d,o=o+r,n=n-d,f=f+(1-f)*l,l=c[0],d=c[1],r=c[2],q=c[3],m=c[4],t=c[5],v=c[6],s=c[7],u=c[8],g=c[9],w=c[10],x=c[11];c[0]=i*l+e*m+h*u;c[1]=i*d+e*t+h*g;c[2]=i*r+e*v+h*w;c[3]=i*q+e*s+h*x;c[4]=p*l+j*m+k*u;c[5]=p*d+j*t+k*g;c[6]=p*r+j*v+k*w;c[7]=p*q+j*s+k*x;c[8]=o*l+n*m+f*u;c[9]=o*d+n*t+f*g;c[10]=o*r+n*v+f*w;c[11]=o*q+n*s+f*x;return this},scale:function(b){var a=this.elements,c=b.x,d=b.y,b=b.z;a[0]=a[0]*c;a[4]=a[4]*d;a[8]=a[8]*b;a[1]=a[1]*c;a[5]=a[5]*d;a[9]=a[9]*b;a[2]=a[2]*
c;a[6]=a[6]*d;a[10]=a[10]*b;a[3]=a[3]*c;a[7]=a[7]*d;a[11]=a[11]*b;return this},getMaxScaleOnAxis:function(){var b=this.elements;return Math.sqrt(Math.max(b[0]*b[0]+b[1]*b[1]+b[2]*b[2],Math.max(b[4]*b[4]+b[5]*b[5]+b[6]*b[6],b[8]*b[8]+b[9]*b[9]+b[10]*b[10])))},makeTranslation:function(b,a,c){this.set(1,0,0,b,0,1,0,a,0,0,1,c,0,0,0,1);return this},makeRotationX:function(b){var a=Math.cos(b),b=Math.sin(b);this.set(1,0,0,0,0,a,-b,0,0,b,a,0,0,0,0,1);return this},makeRotationY:function(b){var a=Math.cos(b),
b=Math.sin(b);this.set(a,0,b,0,0,1,0,0,-b,0,a,0,0,0,0,1);return this},makeRotationZ:function(b){var a=Math.cos(b),b=Math.sin(b);this.set(a,-b,0,0,b,a,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(b,a){var c=Math.cos(a),d=Math.sin(a),h=1-c,i=b.x,e=b.y,j=b.z,f=h*i,l=h*e;this.set(f*i+c,f*e-d*j,f*j+d*e,0,f*e+d*j,l*e+c,l*j-d*i,0,f*j-d*e,l*j+d*i,h*j*j+c,0,0,0,0,1);return this},makeScale:function(b,a,c){this.set(b,0,0,0,0,a,0,0,0,0,c,0,0,0,0,1);return this},makeFrustum:function(b,a,c,d,h,i){var e=
this.elements;e[0]=2*h/(a-b);e[4]=0;e[8]=(a+b)/(a-b);e[12]=0;e[1]=0;e[5]=2*h/(d-c);e[9]=(d+c)/(d-c);e[13]=0;e[2]=0;e[6]=0;e[10]=-(i+h)/(i-h);e[14]=-2*i*h/(i-h);e[3]=0;e[7]=0;e[11]=-1;e[15]=0;return this},makePerspective:function(b,a,c,d){var b=c*Math.tan(THREE.Math.degToRad(b*0.5)),h=-b;return this.makeFrustum(h*a,b*a,h,b,c,d)},makeOrthographic:function(b,a,c,d,h,i){var e=this.elements,j=a-b,f=c-d,l=i-h;e[0]=2/j;e[4]=0;e[8]=0;e[12]=-((a+b)/j);e[1]=0;e[5]=2/f;e[9]=0;e[13]=-((c+d)/f);e[2]=0;e[6]=0;
e[10]=-2/l;e[14]=-((i+h)/l);e[3]=0;e[7]=0;e[11]=0;e[15]=1;return this},clone:function(){var b=this.elements;return new THREE.Matrix4(b[0],b[4],b[8],b[12],b[1],b[5],b[9],b[13],b[2],b[6],b[10],b[14],b[3],b[7],b[11],b[15])}};z._mulUint32=function(b,a){var c=b&65535,d=a&65535;return((b>>>16)*d+c*(a>>>16)<<16)+c*d>>>0};z._toNumber=function(b){return typeof b=="number"&&!isNaN(b)?Math.ceil(b):0};z.prototype.setSeed=function(b){var a=this._mt;if(typeof b=="number"){a[0]=b>>>0;for(var c=1;c<a.length;c++){var d=
a[c-1]^a[c-1]>>>30;a[c]=z._mulUint32(1812433253,d)+c}this._index=a.length}else if(b instanceof Array){var c=1,h=0;this.setSeed(19650218);for(var i=Math.max(a.length,b.length);i>0;i--){d=a[c-1]^a[c-1]>>>30;d=z._mulUint32(d,1664525);a[c]=(a[c]^d)+(b[h]>>>0)+h;if(++c>=a.length){a[0]=a[a.length-1];c=1}++h>=b.length&&(h=0)}for(i=a.length-1;i>0;i--){d=a[c-1]^a[c-1]>>>30;d=z._mulUint32(d,1566083941);a[c]=(a[c]^d)-c;if(++c>=a.length){a[0]=a[a.length-1];c=1}}a[0]=2147483648}else throw new TypeError("MersenneTwister: illegal seed.");
};z.prototype._nextInt=function(){var b=this._mt,a;if(this._index>=b.length){var c=0,d=b.length;do{a=b[c]&2147483648|b[c+1]&2147483647;b[c]=b[c+397]^a>>>1^(a&1?2567483615:0)}while(++c<d-397);do{a=b[c]&2147483648|b[c+1]&2147483647;b[c]=b[c+397-d]^a>>>1^(a&1?2567483615:0)}while(++c<d-1);a=b[d-1]&2147483648|b[0]&2147483647;b[d-1]=b[396]^a>>>1^(a&1?2567483615:0);this._index=0}a=b[this._index++];a=a^a>>>11;a=a^a<<7&2636928640;a=a^a<<15&4022730752;return(a^a>>>18)>>>0};z.prototype.nextInt=function(){var b,
a;switch(arguments.length){case 0:return this._nextInt();case 1:b=0;a=z._toNumber(arguments[0]);break;default:b=z._toNumber(arguments[0]);a=z._toNumber(arguments[1])-b}if(!(0<a&&a<4294967296))return this._nextInt()+b;if((a&~a+1)==a)return(a-1&this._nextInt())+b;var c;do c=this._nextInt();while(a>4294967296-(c-(c=c%a)));return c+b};z.prototype.next=function(){var b=this._nextInt()>>>5,a=this._nextInt()>>>6;return(b*67108864+a)/9007199254740992};return u}();
